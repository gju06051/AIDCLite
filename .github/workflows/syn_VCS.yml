# This file describes a workflow that runs regression tests
# on a pull request to the main branch
name: Synthesis VCS 
run-name: IP-level synthesis using VCS from ${{ github.actor }}
on:
  pull_request:
    branches:
      - main
  schedule:
    - cron: '30 5 * * *'    # 5:30 AM (UTC), any day of the month, any month, any day of the week
  workflow_dispatch:

# workflow executed in a action_runner (self-hosted)
# if you want to use another process(default TSMC65), you should change the process at line 30
jobs:
  Design-Compiler:
    # runs on a server with Synopsys Design Compiler installed
    runs-ons: self-hosted
    steps:
      # checkout the repository (with its submodules) to the runner
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          submodules: recursive
      # run synthesis and generate report in ${WORKING_DIR}/work.syn
      - name: Synthesis
        uses: scalable-arch/rtl-actions/syn_VCS@ee93830aa7e5e93006bf53d2933dcc8e9cb187ef
        with:
          process: UMC28
          out: $${{github.workspace}}/work.syn
      # cat output report on github action consoles
      - name: Report (Design, Timing, Area, Power)
        uses: scalable-arch/rtl-actions/syn_report@ee93830aa7e5e93006bf53d2933dcc8e9cb187ef
        with:
          out: $${{github.workspace}}/work.syn